define(["underscore","marionette","../core"],function(e,t,i){var o=function(t){return t.children?{type:t.type,children:e.map(t.children,o)}:{concept:t.concept,field:t.field,operator:t.operator,value:t.value}},n=t.ItemView.extend({className:"modal hide",template:"api/dialog",ui:{curl:"#api-curl textarea",python:"#api-python textarea",type:"input[name=type]"},events:{"click @ui.type":"changeType"},initialize:function(){if(this.data={},!(this.data.context=this.options.context))throw new Error("context model required");if(!(this.data.view=this.options.view))throw new Error("view model required")},onRender:function(){var e={boxSizing:"border-box",width:"100%",resize:"none",fontFamily:'Monaco,Menlo,Consolas,"Courier New",monospace',fontSize:"0.9em"};this.ui.curl.css(e),this.ui.python.css(e),this.$(".modal-body").css({maxHeight:"600px"}),this.$el.css({bottom:"10%"}).modal({show:!1,keyboard:!1,backdrop:"static"})},open:function(){this.$el.modal("show"),this.renderSnippets()},close:function(){this.$el.modal("hide")},changeType:function(){this.renderSnippets()},renderSnippets:function(){var e=JSON.stringify({context:o(this.data.context.get("json")),view:this.data.view.get("json")});e=e.replace("'","\\'");var t=this.ui.type.filter(":checked").val(),n=i.data.exporter.get(t).get("uri"),r={url:n,body:e,type:t,token:"YOUR-TOKEN-HERE"},a=i.templates.get("api/curl")(r),s=i.templates.get("api/python")(r);this.ui.curl.val(a),this.ui.python.val(s)}});return{ApiScriptDialog:n}});
//# sourceMappingURL=api.js.map